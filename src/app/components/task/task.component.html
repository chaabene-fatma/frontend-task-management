<form *ngIf="task; else emptyForm" #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)">
  <div class="mb-3">
    <label for="title" class="form-label">Title</label>
    <input
      id="title"
      name="title"
      class="form-control"
      [(ngModel)]="task.title"
      maxlength="50"
      #title="ngModel"
      required
    />
    <div *ngIf="title.invalid && title.touched" class="text-danger">
      <small *ngIf="title.errors?.['required']">Title is required.</small>
      <small *ngIf="title.errors?.['maxlength']">Title must not exceed 50 characters.</small>
    </div>
  </div>
  <div class="mb-3">
    <label for="description" class="form-label">Description</label>
    <textarea
      id="description"
      name="description"
      class="form-control"
      [(ngModel)]="task.description"
    ></textarea>
  </div>
  <div class="mb-3">
    <label for="dueDate" class="form-label">Due Date</label>
    <input
      id="dueDate"
      type="date"
      name="dueDate"
      class="form-control"
      [(ngModel)]="task.dueDate"
      #dueDate="ngModel"
      required
    />
    <div *ngIf="dueDate.invalid && dueDate.touched" class="text-danger">
      <small *ngIf="dueDate.errors?.['required']">Due date is required.</small>
    </div>
  </div>
  <div class="mb-3">
    <label for="status" class="form-label">Status</label>
    <select
      id="status"
      name="status"
      class="form-control"
      [(ngModel)]="task.status"
      #status="ngModel"
      required
    >
      <option value="PENDING">Pending</option>
      <option value="COMPLETED">Completed</option>
    </select>
    <div *ngIf="status.invalid && status.touched" class="text-danger">
      <small *ngIf="status.errors?.['required']">Status is required.</small>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Save Task</button>
</form>

<ng-template #emptyForm>
<form #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)">
  <div class="mb-3">
    <label for="title2" class="form-label">Title</label>
    <input id="title2" name="title" class="form-control" ngModel #title="ngModel" required>
    <div *ngIf="title.invalid && title.touched" class="text-danger">
      <small *ngIf="title.errors?.['required']">Title is required.</small>
      <small *ngIf="title.errors?.['maxlength']">Title must not exceed 50 characters.</small>
    </div>
  </div>
  <div class="mb-3">
    <label for="description2" class="form-label">Description</label>
    <textarea id="description2" name="description" class="form-control" ngModel></textarea>
  </div>
  <div class="mb-3">
    <label for="dueDate2" class="form-label">Due Date</label>
    <input id="dueDate2" type="date" name="dueDate" class="form-control" ngModel #dueDate="ngModel" required>
    <div *ngIf="dueDate.invalid && dueDate.touched" class="text-danger">
      <small *ngIf="dueDate.errors?.['required']">Due date is required.</small>
    </div>
  </div>
  <div class="mb-3">
    <label for="status2" class="form-label">Status</label>
    <select id="status2" name="status" class="form-control" ngModel #status="ngModel" required>
      <option value="PENDING">Pending</option>
      <option value="COMPLETED">Completed</option>
    </select>
    <div *ngIf="status.invalid && status.touched" class="text-danger">
      <small *ngIf="status.errors?.['required']">Status is required.</small>
    </div>
  </div>
  <button type="submit" class="btn btn-primary" [disabled]="taskForm.invalid">Create Task</button>
</form>
</ng-template>
